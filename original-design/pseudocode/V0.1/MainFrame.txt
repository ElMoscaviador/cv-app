import useMediaQuery from '@mui/material/useMediaQuery';

class MainFrame {
    constructor() {
        this.state = {
            currentIndex: 0,
            currentSection: 'generalInformation'
            isRegularScreen: true
            previewMode: false,
            savedData: {}
        }
        this.sections = {
        generalInformation: GeneralInformation, 
        optionalSectionsSelector: 
        OptionalSectionsSelector, 
        review: Review, 
        preview: Preview
        }
    }

    toggleSmallScreenMode() {
        if (useMediaQuery('(min-width:600px)') {
            this.setState(() => {
                return {...this.state, this.state.isRegularScreen === !this.state.isRegularScreen}
            })
        }
    }

    saveDataAndDisplayNextPage(dataToSave) {
        this.setState(() => {
            return {...this.state, 
            currentIndex: this.state.currentIndex + 1,
            currentSection: Object.keys(this.sections)[this;state.currentIndex],
            savedData: {this.state.savedData, [this.state.currentSection]: dataToSave},
        }) 
    }

    displayNextPage() {
        this.setState(() => {
            return {...this.state, 
            currentIndex: this.state.currentIndex + 1,
            currentSection: Object.keys(this.sections)[this;state.currentIndex],
        }) 
    }

    useEffect() {
        this.toggleSmallScreenMode()
    }

    render() {
        return (
            <Skeleton 
            isRegularScreen={this.state.isRegularScreen}>
            {<this.state.sections[currentIndex] saveDataAndDisplayNextPage={saveDataAndDisplayNextPage} displayNextPage={displayNextPage}/>
            globallySavedData={this.state.savedData}}
            </Skeleton>
        )
    }
}